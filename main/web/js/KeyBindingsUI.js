var h=class{constructor(n){this.keysList=null;this.editFormContainer=null;this.addKeyBtn=null;this.app=n,this.initializeUIElements(),this.initializeEventListeners()}initializeUIElements(){this.keysList=document.getElementById("keys-list"),this.editFormContainer=document.getElementById("edit-form-container"),this.addKeyBtn=document.getElementById("add-key")}initializeEventListeners(){this.addKeyBtn&&this.addKeyBtn.addEventListener("click",()=>{this.showEditForm(null,-1)})}loadKeyBindings(){!this.keysList||!this.app.settings.Keybindings||(this.keysList.innerHTML="",this.editFormContainer&&(this.editFormContainer.innerHTML="",this.editFormContainer.classList.remove("active")),this.app.settings.Keybindings.forEach((n,a)=>{if(this.keysList===null)return;let d=document.createElement("tr");d.dataset.index=a.toString();let i=document.createElement("td");i.textContent=n.key,d.appendChild(i);let c=document.createElement("td");c.textContent=n.commands,d.appendChild(c);let o=document.createElement("td"),t=document.createElement("button");t.textContent="Edit",t.style.marginRight="5px",t.addEventListener("click",()=>{this.showEditForm(n,a)});let s=document.createElement("button");s.textContent="Delete",s.addEventListener("click",()=>{this.app.settings.Keybindings.splice(a,1),this.app.saveSettings(),this.loadKeyBindings()}),o.appendChild(t),o.appendChild(s),d.appendChild(o),this.keysList.appendChild(d)}))}showEditForm(n,a){if(!this.editFormContainer)return;this.editFormContainer.innerHTML="";let d=document.createElement("h4");d.textContent=a===-1?"Add New Key Binding":"Edit Key Binding",this.editFormContainer.appendChild(d);let i=document.createElement("div");i.className="form-row";let c=document.createElement("label");c.textContent="Key:",c.setAttribute("for","edit-key-input");let o=document.createElement("input");o.type="text",o.id="edit-key-input",o.value=n?n.key:"",o.placeholder="e.g., Numpad8, KeyA, ArrowUp";let t=document.createElement("button");t.textContent="Capture Key",t.className="capture-key-btn",t.type="button",i.appendChild(c),i.appendChild(o),i.appendChild(t),this.editFormContainer.appendChild(i);let s=document.createElement("div");s.className="form-row";let r=document.createElement("label");r.textContent="Command:",r.setAttribute("for","edit-cmd-input");let e=document.createElement("input");e.type="text",e.id="edit-cmd-input",e.value=n?n.commands:"",e.placeholder="e.g., north, look, /disconnect",s.appendChild(r),s.appendChild(e),this.editFormContainer.appendChild(s);let l=document.createElement("div");l.innerHTML='<small>Tip: Press "Capture Key" and press any key combination to automatically set the key.</small>',l.style.marginTop="5px",l.style.color="#999",this.editFormContainer.appendChild(l);let m=document.createElement("div");m.className="button-row";let u=document.createElement("button");u.textContent="Save",u.addEventListener("click",()=>{a===-1?this.app.settings.Keybindings.push({key:o.value,commands:e.value}):n&&(n.key=o.value,n.commands=e.value),this.app.saveSettings(),this.loadKeyBindings()});let p=document.createElement("button");p.textContent="Cancel",p.style.backgroundColor="#555",p.addEventListener("click",()=>{this.editFormContainer&&(this.editFormContainer.innerHTML="",this.editFormContainer.classList.remove("active"))}),m.appendChild(u),m.appendChild(p),this.editFormContainer.appendChild(m),this.editFormContainer.classList.add("active"),t.addEventListener("click",()=>{this.showKeyCaptureDialog(o)})}showKeyCaptureDialog(n){let a=document.createElement("div");a.className="key-capture-overlay";let d=document.createElement("div");d.className="key-capture-dialog";let i=document.createElement("div");i.className="key-capture-content";let c=document.createElement("h3");c.textContent="Waiting for key...";let o=document.createElement("p");o.textContent="Press any key or key combination to capture it.";let t=document.createElement("div");t.className="key-display",t.textContent="Press a key";let s=document.createElement("button");s.textContent="Cancel",s.addEventListener("click",()=>{document.body.removeChild(a),document.removeEventListener("keydown",r)}),i.appendChild(c),i.appendChild(o),i.appendChild(t),i.appendChild(s),d.appendChild(i),a.appendChild(d),document.body.appendChild(a),d.focus();let r=e=>{if(e.preventDefault(),e.stopPropagation(),e.key==="Control"||e.key==="Alt"||e.key==="Shift"||e.key==="Meta"||e.code==="ControlLeft"||e.code==="ControlRight"||e.code==="AltLeft"||e.code==="AltRight"||e.code==="ShiftLeft"||e.code==="ShiftRight"){t.textContent="Waiting for a non-modifier key...";return}let l="";e.ctrlKey&&(l+="Ctrl+"),e.altKey&&(l+="Alt+"),e.shiftKey&&(l+="Shift+"),l+=e.code,t.textContent=l,n.value=l,setTimeout(()=>{document.body.removeChild(a),document.removeEventListener("keydown",r)},500)};document.addEventListener("keydown",r)}updateUI(){this.loadKeyBindings()}};export{h as KeyBindingsUI};
//# sourceMappingURL=KeyBindingsUI.js.map
